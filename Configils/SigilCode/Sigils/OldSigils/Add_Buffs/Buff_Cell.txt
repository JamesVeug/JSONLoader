// Using Inscryption
using UnityEngine;
using DiskCardGame;

// Modding Inscryption
using APIPlugin;

using System.Collections;
using System.Collections.Generic;
using System.IO; // Loading Sigil and Card art.
using System;
using System.Linq;
using System.Text.RegularExpressions;
using JLPlugin.Data;



namespace JLPlugin.SigilCode
{
	using Utils;

	public class Buff_Cell : ConfigurableBase
	{
		private CardModificationInfo mod = new CardModificationInfo();
		public Ability ability;

		public override Ability Ability
		{
			get
            { 
				return ability;
			}
		}
		public void Start()
        {
			foreach (Ability sigil in ability_list)
			{
				mod.attackAdjustment += int.Parse(SigilData.GetArgument<List<string>>(sigil, "attackStats")[0]);
				mod.healthAdjustment += int.Parse(SigilData.GetArgument<List<string>>(sigil, "healthStats")[0]);
				mod.abilities.AddRange(SigilData.GetAllAbilities(sigil));
			}
		}

		public void Update()
        {
			if (Singleton<ConduitCircuitManager>.Instance.SlotIsWithinCircuit(base.Card.Slot))
            {
				base.Card.AddTemporaryMod(mod);
            } else
            {
				base.Card.RemoveTemporaryMod(mod);
			}
        }
	}
}